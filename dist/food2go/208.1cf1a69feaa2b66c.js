"use strict";(self.webpackChunkfood2go=self.webpackChunkfood2go||[]).push([[208],{4208:(ge,y,s)=>{s.r(y),s.d(y,{WeeklyPaymentsModule:()=>he});var _=s(3170),g=s(7423),C=s(7446),f=s(508),c=s(6856),A=s(4834),m=s(7322),Z=s(5245),v=s(8833),w=s(2181),k=s(5899),P=s(9814),x=s(4107),D=s(2638),i=s(4999),M=s(7238),W=s(4521),Y=s(7853),N=s(4466),T=s(5439),u=s.n(T),S=s(922),U=s(7579),J=s(2722),e=s(5e3),q=s(1135),Q=s(8505),d=s(2340),I=s(520);let b=(()=>{class t{constructor(n){this._httpClient=n,this._data=new q.X(null)}get data$(){return this._data.asObservable()}set data$(n){this._data.next(n)}getData(n){return this._httpClient.post(d.N.API_ENDPOINT+"v1/weeklypayment",n).pipe((0,Q.b)(o=>{this._data.next(o.result)}))}fetch(n){return this._httpClient.post(d.N.API_ENDPOINT+"v1/weeklypayment",n)}setData(n){this._data.next(n)}sendData(n){return this._httpClient.post(d.N.API_ENDPOINT+"v1/weeklypayment/send",n)}approve(n){return this._httpClient.get(d.N.API_ENDPOINT+"v1/weeklypayment/approveByAdmin/"+n)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(I.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var F=s(1683),p=s(9808),h=s(3075);function B(t,a){1&t&&(e.TgZ(0,"div",43),e._UZ(1,"mat-progress-bar",44),e.qZA()),2&t&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function L(t,a){1&t&&(e.TgZ(0,"th",45),e._uU(1," Reference ID "),e.qZA())}function R(t,a){if(1&t&&(e.TgZ(0,"td",46),e.TgZ(1,"span",47),e._uU(2),e.qZA(),e.qZA()),2&t){const n=a.$implicit;e.xp6(2),e.hij(" ",n.id," ")}}function K(t,a){1&t&&(e.TgZ(0,"th",45),e._uU(1," Date "),e.qZA())}function O(t,a){if(1&t&&(e.TgZ(0,"td",46),e.TgZ(1,"span",48),e._uU(2),e.ALo(3,"date"),e.ALo(4,"date"),e.qZA(),e.qZA()),2&t){const n=a.$implicit;e.xp6(2),e.AsE(" ",e.xi3(3,2,n.date_from,"MMM dd, y")," to ",e.xi3(4,5,n.date_to,"MMM dd, y")," ")}}function $(t,a){1&t&&(e.TgZ(0,"th",45),e._uU(1," Name "),e.qZA())}function j(t,a){if(1&t&&(e.TgZ(0,"td",46),e.TgZ(1,"span",48),e._uU(2),e.qZA(),e.qZA()),2&t){const n=a.$implicit;e.xp6(2),e.hij(" ",n.merchant_name," ")}}function E(t,a){1&t&&(e.TgZ(0,"th",45),e._uU(1," Amount "),e.qZA())}function H(t,a){if(1&t&&(e.TgZ(0,"td",46),e.TgZ(1,"span",49),e._uU(2),e.ALo(3,"currency"),e.qZA(),e.qZA()),2&t){const n=a.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,1,n.amount,"PHP")," ")}}function z(t,a){1&t&&(e.TgZ(0,"th",45),e._uU(1," Status "),e.qZA())}const V=function(t,a,n){return{"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":t,"bg-blue-200 text-blue-800 dark:bg-blue-600 dark:text-blue-50":a,"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":n}};function G(t,a){if(1&t&&(e.TgZ(0,"td",46),e.TgZ(1,"span",50),e.TgZ(2,"span",51),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Q6J("ngClass",e.kEZ(2,V,"pending"===n.status,"settled"===n.status,"completed"===n.status)),e.xp6(2),e.Oqu(n.status)}}function X(t,a){1&t&&(e.TgZ(0,"th",45),e._uU(1," Proof "),e.qZA())}function ee(t,a){if(1&t&&(e.TgZ(0,"span",51),e.TgZ(1,"a",54),e._uU(2,"View"),e.qZA(),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.s9C("href",n.proof_url,e.LSH)}}function te(t,a){1&t&&(e.TgZ(0,"span",51),e._uU(1,"Not Available"),e.qZA())}function ne(t,a){if(1&t&&(e.TgZ(0,"td",46),e.TgZ(1,"span",52),e.YNc(2,ee,3,1,"span",53),e.YNc(3,te,2,0,"span",53),e.qZA(),e.qZA()),2&t){const n=a.$implicit;e.xp6(2),e.Q6J("ngIf",n.proof_url),e.xp6(1),e.Q6J("ngIf",!n.proof_url)}}function ae(t,a){1&t&&(e.TgZ(0,"th",45),e._uU(1," Action "),e.qZA())}function oe(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"span",56),e.TgZ(1,"span",57),e.NdJ("click",function(){e.CHM(n);const r=e.oxw().$implicit;return e.oxw().approve(null==r?null:r.id)}),e._uU(2,"Verify"),e.qZA(),e.qZA()}}function se(t,a){if(1&t&&(e.TgZ(0,"td",46),e.YNc(1,oe,3,0,"span",55),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Q6J("ngIf","settled"==(null==n?null:n.status))}}function re(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).seeMore()}),e._uU(1,"Show More"),e.qZA()}}function le(t,a){if(1&t&&(e.TgZ(0,"td",58),e.YNc(1,re,2,0,"button",59),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.seemore)}}function ie(t,a){1&t&&e._UZ(0,"tr",61)}function me(t,a){1&t&&e._UZ(0,"tr",62)}function ce(t,a){1&t&&e._UZ(0,"tr",63)}const ue=function(){return["recentOrdersTableFooter"]},fe=[{path:"",component:(()=>{class t{constructor(n,o){this._weeklyPaymentService=n,this._fuseConfirmationService=o,this.weeklyPaymentsDataSource=new i.by,this.weeklyPaymentsTableColumns=["referenceId","date","name","amount","status","proof","action"],this._unsubscribeAll=new U.x,this.dateFrom=null,this.dateTo=null,this.start=0,this.length=10,this.total=0,this.seemore=!0,this.currentDateFrom=null,this.currentDateTo=null,this.currentStatus="all",this.status="all",this.searchKeyword="",this.currentSearchKeyword="",this.isLoading=!1}ngOnInit(){this._weeklyPaymentService.data$.pipe((0,J.R)(this._unsubscribeAll)).subscribe(n=>{this.data=n.data,this.weeklyPaymentsDataSource.data=null==n?void 0:n.data,this.total=null==n?void 0:n.total,this.seemore=!((null==n?void 0:n.data.length)>=this.total),0==this.total&&(this.length=0)})}search(){let n=u()(this.dateFrom).format("yyyy-MM-DD"),o=u()(this.dateTo).format("yyyy-MM-DD");null==this.dateFrom&&(n=null),null==this.dateTo&&(o=null),this.currentDateFrom=n,this.currentDateTo=o,this.currentStatus=this.status,this.currentSearchKeyword=this.searchKeyword,this.data=this._weeklyPaymentService.getData({start:0,length:10,merchant_id:-1,date_from:n,date_to:o,status:this.status,search:this.searchKeyword}).subscribe()}seeMore(){const n=this.currentDateFrom,o=this.currentDateTo,r=this.status,l=this.currentSearchKeyword;this.length+=10,this.data=this._weeklyPaymentService.getData({start:0,length:this.length,merchant_id:-1,date_from:n,date_to:o,status:r,search:l}).subscribe()}searchKeywordInput(){this.data=this._weeklyPaymentService.getData({start:0,length:this.length,merchant_id:-1,date_from:this.currentDateFrom,date_to:this.currentDateTo,status:this.status,search:this.searchKeyword}).subscribe()}trackByFn(n,o){return o.id||n}sendWeeklyPayment(){const n=u()(this.dateFrom).format("yyyy-MM-DD"),o=u()(this.dateTo).format("yyyy-MM-DD");this._fuseConfirmationService.open({title:"Send weekly payment to all merchant?",message:"",icon:{show:!1,name:"heroicons_outline:question-mark-circle",color:"primary"},actions:{confirm:{show:!0,label:"Yes",color:"primary"},cancel:{show:!0,label:"Cancel"}},dismissible:!0}).afterClosed().subscribe(r=>{"confirmed"==r&&this._weeklyPaymentService.sendData({from:n,to:o}).subscribe(l=>{this._fuseConfirmationService.open({title:l.message,message:"",icon:{show:!1,name:"heroicons_outline:question-mark-circle",color:"primary"},actions:{confirm:{show:!0,label:"Yes",color:"primary"},cancel:{show:!1,label:"Cancel"}},dismissible:!0}).afterClosed().subscribe(ye=>{this.search()})},l=>{this._fuseConfirmationService.open({title:l.error.message,message:"",icon:{show:!1,name:"heroicons_outline:question-mark-circle",color:"primary"},actions:{confirm:{show:!0,label:"Yes",color:"primary"},cancel:{show:!1,label:"Cancel"}},dismissible:!0}).afterClosed().subscribe(ye=>{})})})}approve(n){this._fuseConfirmationService.open({title:"Approved this payment?",message:"",icon:{show:!1,name:"heroicons_outline:question-mark-circle",color:"primary"},actions:{confirm:{show:!0,label:"Yes",color:"primary"},cancel:{show:!0,label:"Cancel"}},dismissible:!0}).afterClosed().subscribe(o=>{"confirmed"==o&&this._weeklyPaymentService.approve(n).subscribe(r=>{this._fuseConfirmationService.open({title:r.message,message:"",icon:{show:!1,name:"heroicons_outline:question-mark-circle",color:"primary"},actions:{confirm:{show:!0,label:"Yes",color:"primary"},cancel:{show:!1,label:"Cancel"}},dismissible:!0}).afterClosed().subscribe(l=>{this.search()})},r=>{this._fuseConfirmationService.open({title:r.error.message,message:"",icon:{show:!1,name:"heroicons_outline:question-mark-circle",color:"primary"},actions:{confirm:{show:!0,label:"Yes",color:"primary"},cancel:{show:!1,label:"Cancel"}},dismissible:!0}).afterClosed().subscribe(l=>{})})})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(b),e.Y36(F.R))},t.\u0275cmp=e.Xpm({type:t,selectors:[["weekly-payments"]],decls:75,vars:26,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-36"],[3,"value","ngModel","ngModelChange"],[3,"value"],[1,"fuse-mat-dense","ml-2","fuse-mat-no-subscript","fuse-mat-rounded","min-w-52"],["matInput","","placeholder","Date From",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],[1,"fuse-mat-dense","fuse-mat-no-subscript","ml-2","fuse-mat-rounded","min-w-52"],["matInput","","placeholder","Date To",3,"matDatepicker","ngModel","ngModelChange"],["picker2",""],["mat-flat-button","",1,"ml-4",3,"color","click"],[1,"ml-2","mr-1"],["mat-flat-button","",1,"ml-4",3,"color","disabled","click"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"ngModel","autocomplete","placeholder","ngModelChange","keyup.enter"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[1,"xl:col-span-2","flex","flex-col","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"p-6"],[1,"mr-4","text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"overflow-x-auto","mx-6"],["mat-table","","matSort","",1,"w-full","bg-transparent",3,"dataSource","trackBy"],["recentTransactionsTable",""],["matColumnDef","referenceId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","name"],["matColumnDef","amount"],["matColumnDef","status"],["matColumnDef","proof"],["matColumnDef","action"],["matColumnDef","recentOrdersTableFooter"],["class","py-6 px-0 border-0","mat-footer-cell","","colspan","6",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","order-row h-16","mat-row","",4,"matRowDef","matRowDefColumns"],["class","h-16 border-0","mat-footer-row","",4,"matFooterRowDef"],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"pr-6","font-medium","text-sm","text-secondary","whitespace-nowrap"],[1,"pr-6","whitespace-nowrap"],[1,"pr-6","font-medium","whitespace-nowrap"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase",3,"ngClass"],[1,"leading-relaxed","whitespace-nowrap"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase"],["class","leading-relaxed whitespace-nowrap",4,"ngIf"],["target","_blank",3,"href"],["class","cursor-pointer inline-flex items-center font-bold text-sm px-2.5 py-0.5 rounded-full tracking-wide uppercase bg-blue-200 text-blue-800 dark:bg-blue-600 dark:text-blue-50",4,"ngIf"],[1,"cursor-pointer","inline-flex","items-center","font-bold","text-sm","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase","bg-blue-200","text-blue-800","dark:bg-blue-600","dark:text-blue-50"],[1,"leading-relaxed","whitespace-nowrap",3,"click"],["mat-footer-cell","","colspan","6",1,"py-6","px-0","border-0"],["mat-stroked-button","",3,"click",4,"ngIf"],["mat-stroked-button","",3,"click"],["mat-header-row",""],["mat-row","",1,"order-row","h-16"],["mat-footer-row","",1,"h-16","border-0"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,B,2,1,"div",2),e.TgZ(3,"div",3),e._uU(4,"Weekly Payments"),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"mat-form-field",5),e.TgZ(7,"mat-select",6),e.NdJ("ngModelChange",function(l){return o.status=l}),e.TgZ(8,"mat-option",7),e._uU(9,"All"),e.qZA(),e.TgZ(10,"mat-option",7),e._uU(11,"Pending"),e.qZA(),e.TgZ(12,"mat-option",7),e._uU(13,"Settled"),e.qZA(),e.TgZ(14,"mat-option",7),e._uU(15,"Completed"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"mat-form-field",8),e.TgZ(17,"input",9),e.NdJ("ngModelChange",function(l){return o.dateFrom=l}),e.qZA(),e.TgZ(18,"mat-hint"),e._uU(19,"MM/DD/YYYY"),e.qZA(),e._UZ(20,"mat-datepicker-toggle",10),e._UZ(21,"mat-datepicker",null,11),e.qZA(),e.TgZ(23,"mat-form-field",12),e.TgZ(24,"input",13),e.NdJ("ngModelChange",function(l){return o.dateTo=l}),e.qZA(),e.TgZ(25,"mat-hint"),e._uU(26,"MM/DD/YYYY"),e.qZA(),e._UZ(27,"mat-datepicker-toggle",10),e._UZ(28,"mat-datepicker",null,14),e.qZA(),e.TgZ(30,"button",15),e.NdJ("click",function(){return o.search()}),e.TgZ(31,"span",16),e._uU(32,"Search"),e.qZA(),e.qZA(),e.TgZ(33,"button",17),e.NdJ("click",function(){return o.sendWeeklyPayment()}),e.TgZ(34,"span",16),e._uU(35,"Send Weekly Payment"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",4),e.TgZ(37,"mat-form-field",18),e._UZ(38,"mat-icon",19),e.TgZ(39,"input",20),e.NdJ("ngModelChange",function(l){return o.searchKeyword=l})("keyup.enter",function(){return o.searchKeywordInput()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",21),e.TgZ(41,"div",22),e.TgZ(42,"div",23),e.TgZ(43,"div",24),e.TgZ(44,"div",25),e._uU(45,"Recent Weekly Payment"),e.qZA(),e.qZA(),e.TgZ(46,"div",26),e.TgZ(47,"table",27,28),e.ynx(49,29),e.YNc(50,L,2,0,"th",30),e.YNc(51,R,3,1,"td",31),e.BQk(),e.ynx(52,32),e.YNc(53,K,2,0,"th",30),e.YNc(54,O,5,8,"td",31),e.BQk(),e.ynx(55,33),e.YNc(56,$,2,0,"th",30),e.YNc(57,j,3,1,"td",31),e.BQk(),e.ynx(58,34),e.YNc(59,E,2,0,"th",30),e.YNc(60,H,4,4,"td",31),e.BQk(),e.ynx(61,35),e.YNc(62,z,2,0,"th",30),e.YNc(63,G,4,6,"td",31),e.BQk(),e.ynx(64,36),e.YNc(65,X,2,0,"th",30),e.YNc(66,ne,4,2,"td",31),e.BQk(),e.ynx(67,37),e.YNc(68,ae,2,0,"th",30),e.YNc(69,se,2,1,"td",31),e.BQk(),e.ynx(70,38),e.YNc(71,le,2,1,"td",39),e.BQk(),e.YNc(72,ie,1,0,"tr",40),e.YNc(73,me,1,0,"tr",41),e.YNc(74,ce,1,0,"tr",42),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const r=e.MAs(22),l=e.MAs(29);e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(5),e.Q6J("value","all")("ngModel",o.status),e.xp6(1),e.Q6J("value","all"),e.xp6(2),e.Q6J("value","pending"),e.xp6(2),e.Q6J("value","settled"),e.xp6(2),e.Q6J("value","completed"),e.xp6(3),e.Q6J("matDatepicker",r)("ngModel",o.dateFrom),e.xp6(3),e.Q6J("for",r),e.xp6(4),e.Q6J("matDatepicker",l)("ngModel",o.dateTo),e.xp6(3),e.Q6J("for",l),e.xp6(3),e.Q6J("color","primary"),e.xp6(3),e.Q6J("color","accent")("disabled",o.isLoading),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("ngModel",o.searchKeyword)("autocomplete","off")("placeholder","Search"),e.xp6(8),e.Q6J("dataSource",o.weeklyPaymentsDataSource)("trackBy",o.trackByFn),e.xp6(25),e.Q6J("matHeaderRowDef",o.weeklyPaymentsTableColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.weeklyPaymentsTableColumns),e.xp6(1),e.Q6J("matFooterRowDef",e.DdM(25,ue))}},directives:[p.O5,m.KE,x.gD,h.JJ,h.On,f.ey,v.Nt,c.hl,h.Fj,m.bx,c.nW,m.R9,c.Mq,g.lW,Z.Hw,m.qo,i.BZ,i.w1,i.fO,i.Dz,i.mD,i.as,i.nj,i.Ke,k.pW,i.ge,i.ev,p.mk,i.yh,i.XQ,i.Gk,i.Q2],pipes:[p.uU,p.H9],encapsulation:2}),t})(),data:{roles:["admin"]},canActivate:[S.Q],resolve:{data:(()=>{class t{constructor(n){this._weeklypaymentservice=n}resolve(n,o){return this._weeklypaymentservice.getData({length:10,start:0,merchant_id:-1,status:"all",date_from:null,date_to:null,search:""})}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(b))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}];let he=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[{provide:f.sG,useValue:{parse:{dateInput:T.ISO_8601},display:{dateInput:"LL",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}}],imports:[[W.Bz.forChild(fe),g.ot,C.p9,c.FA,A.t,m.lN,Z.Ps,v.c,w.Tx,_.Yd,k.Cv,P.Fk,f.si,x.LD,D.SJ,i.p0,M.AV,Y.V,N.m]]}),t})()}}]);